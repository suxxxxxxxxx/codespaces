{"remainingRequest":"C:\\Users\\86157\\Desktop\\vue3\\zhihu\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\86157\\Desktop\\vue3\\zhihu\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\86157\\Desktop\\vue3\\zhihu\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\86157\\Desktop\\vue3\\zhihu\\src\\pages\\UpdatePerson.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\86157\\Desktop\\vue3\\zhihu\\src\\pages\\UpdatePerson.vue","mtime":1713190490174},{"path":"C:\\Users\\86157\\Desktop\\vue3\\zhihu\\babel.config.js","mtime":1713190411782},{"path":"C:\\Users\\86157\\Desktop\\vue3\\zhihu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\86157\\Desktop\\vue3\\zhihu\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\86157\\Desktop\\vue3\\zhihu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\86157\\Desktop\\vue3\\zhihu\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMvODYxNTcvRGVza3RvcC92dWUzL3poaWh1L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzLzg2MTU3L0Rlc2t0b3AvdnVlMy96aGlodS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgTmF2IGZyb20gIkAvY29tcG9uZW50cy9OYXYudnVlIjsKaW1wb3J0IHsgcmVhY3RpdmUsIHRvUmVmcyB9IGZyb20gInZ1ZSI7CmltcG9ydCB7IHVzZVN0b3JlIH0gZnJvbSAidnVleCI7CmltcG9ydCB7IFRvYXN0IH0gZnJvbSAidmFudCI7CmltcG9ydCBhcGkgZnJvbSAiQC9hcGkvaW5kZXgiOwppbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tICJ2dWUtcm91dGVyIjsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIE5hdjogTmF2CiAgfSwKICBuYW1lOiAiVXBkYXRlUGVyc29uIiwKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7CiAgICB2YXIgc3RvcmUgPSB1c2VTdG9yZSgpLAogICAgICAgIHJvdXRlciA9IHVzZVJvdXRlcigpOwogICAgdmFyIG5hbWUgPSBzdG9yZS5zdGF0ZS5pbmZvLm5hbWU7CiAgICB2YXIgc3RhdGUgPSByZWFjdGl2ZSh7CiAgICAgIG5hbWU6IG5hbWUsCiAgICAgIHBpYzogW10sCiAgICAgIGxvYWRpbmc6IGZhbHNlCiAgICB9KTsKCiAgICB2YXIgc3VibWl0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIG5hbWUsIHBpYywgcmVnLCBfeWllbGQkYXBpJHVzZXJVcGRhdGUsIGNvZGUsIGRhdGE7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghc3RhdGUubG9hZGluZykgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHN0YXRlLmxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgbmFtZSA9IHN0YXRlLm5hbWUsIHBpYyA9IHN0YXRlLnBpYywgcmVnID0gL15bXHdcdTRlMDAtXHU5ZmE1XSskLzsgLy8g5qC85byP5qCh6aqMCgogICAgICAgICAgICAgICAgaWYgKHJlZy50ZXN0KG5hbWUpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBUb2FzdCgi5bCP5Li777yM55So5oi35ZCN6L6T5YWl6ZSZ6K+vfiIpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIGlmICghKHBpYy5sZW5ndGggPT09IDApKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgVG9hc3QoIuWwj+S4u++8jOW/hemhu+S4iuS8oOS4gOW8oOWbvueJh34iKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgcmV0dXJuIGFwaS51c2VyVXBkYXRlKG5hbWUsIHBpY1swXS5maWxlKTsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgIF95aWVsZCRhcGkkdXNlclVwZGF0ZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBjb2RlID0gX3lpZWxkJGFwaSR1c2VyVXBkYXRlLmNvZGU7CiAgICAgICAgICAgICAgICBkYXRhID0gX3lpZWxkJGFwaSR1c2VyVXBkYXRlLmRhdGE7CgogICAgICAgICAgICAgICAgaWYgKCEoK2NvZGUgIT09IDApKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxODsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgVG9hc3QoIuWwj+S4u++8jOS/oeaBr+S/ruaUueWksei0pe+8jOivt+eojeWQjuWGjeivlX4iKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgICAgVG9hc3QoIuWwj+S4u+WkquajkuWVpu+8jOS/oeaBr+S/ruaUueaIkOWKn34iKTsKICAgICAgICAgICAgICAgIHN0b3JlLmNvbW1pdCgiY2hhbmdlSW5mbyIsIGRhdGEpOwogICAgICAgICAgICAgICAgcm91dGVyLnJlcGxhY2UoIi9wZXJzb24iKTsKICAgICAgICAgICAgICAgIHN0YXRlLmxvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gc3VibWl0KCkgewogICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9KCk7CgogICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdG9SZWZzKHN0YXRlKSksIHt9LCB7CiAgICAgIHN1Ym1pdDogc3VibWl0CiAgICB9KTsKICB9Cn07"},{"version":3,"sources":["C:\\Users\\86157\\Desktop\\vue3\\zhihu\\src\\pages\\UpdatePerson.vue"],"names":[],"mappings":";;;;;;AA6BA,OAAO,GAAP,MAAgB,sBAAhB;AACA,SAAS,QAAT,EAAmB,MAAnB,QAAiC,KAAjC;AACA,SAAS,QAAT,QAAyB,MAAzB;AACA,SAAS,KAAT,QAAsB,MAAtB;AACA,OAAO,GAAP,MAAgB,aAAhB;AACA,SAAS,SAAT,QAA0B,YAA1B;AAEA,eAAe;AACb,EAAA,UAAU,EAAE;AAAE,IAAA,GAAE,EAAF;AAAF,GADC;AAEb,EAAA,IAAI,EAAE,cAFO;AAGb,EAAA,KAHa,mBAGL;AACN,QAAM,KAAI,GAAI,QAAQ,EAAtB;AAAA,QACE,MAAK,GAAI,SAAS,EADpB;AAGA,QAAM,IAAN,GAAe,KAAK,CAAC,KAAN,CAAY,IAA3B,CAAM,IAAN;AACA,QAAI,KAAI,GAAI,QAAQ,CAAC;AACnB,MAAA,IAAI,EAAJ,IADmB;AAEnB,MAAA,GAAG,EAAE,EAFc;AAGnB,MAAA,OAAO,EAAE;AAHU,KAAD,CAApB;;AAMA,QAAM,MAAK;AAAA,yEAAI;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,qBACT,KAAK,CAAC,OADG;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAEb,gBAAA,KAAK,CAAC,OAAN,GAAgB,IAAhB;AAEM,gBAAA,IAJO,GAIO,KAJP,CAIP,IAJO,EAID,GAJC,GAIO,KAJP,CAID,GAJC,EAKX,GALW,GAKL,sBALK,EAMb;;AANa,oBAOR,GAAG,CAAC,IAAJ,CAAS,IAAT,CAPQ;AAAA;AAAA;AAAA;;AAQX,gBAAA,KAAK,CAAC,aAAD,CAAL;AARW;;AAAA;AAAA,sBAWT,GAAG,CAAC,MAAJ,KAAe,CAXN;AAAA;AAAA;AAAA;;AAYX,gBAAA,KAAK,CAAC,cAAD,CAAL;AAZW;;AAAA;AAAA;AAAA,uBAgBc,GAAG,CAAC,UAAJ,CAAe,IAAf,EAAqB,GAAG,CAAC,CAAD,CAAH,CAAO,IAA5B,CAhBd;;AAAA;AAAA;AAgBP,gBAAA,IAhBO,yBAgBP,IAhBO;AAgBD,gBAAA,IAhBC,yBAgBD,IAhBC;;AAAA,sBAiBT,CAAC,IAAD,KAAU,CAjBD;AAAA;AAAA;AAAA;;AAkBX,gBAAA,KAAK,CAAC,kBAAD,CAAL;AAlBW;;AAAA;AAqBb,gBAAA,KAAK,CAAC,eAAD,CAAL;AACA,gBAAA,KAAK,CAAC,MAAN,CAAa,YAAb,EAA2B,IAA3B;AACA,gBAAA,MAAM,CAAC,OAAP,CAAe,SAAf;AAEA,gBAAA,KAAK,CAAC,OAAN,GAAgB,KAAhB;;AAzBa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAL,MAAK;AAAA;AAAA;AAAA,OAAX;;AA4BA,2CACK,MAAM,CAAC,KAAD,CADX;AAEE,MAAA,MAAM,EAAN;AAFF;AAID;AA9CY,CAAf","sourcesContent":["<template>\n  <Nav />\n  <div class=\"form-box\">\n    <van-cell-group inset>\n      <van-field v-model=\"name\" label=\"用户名\" label-width=\"60px\" />\n\n      <van-field label=\"用户头像\" label-width=\"60px\">\n        <template #input>\n          <van-uploader v-model=\"pic\" max-count=\"1\" />\n        </template>\n      </van-field>\n    </van-cell-group>\n\n    <div style=\"margin: 20px 40px\">\n      <van-button\n        :loading=\"loading\"\n        loading-text=\"处理中...\"\n        round\n        block\n        type=\"primary\"\n        @click=\"submit\"\n      >\n        修改信息\n      </van-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Nav from \"@/components/Nav.vue\";\nimport { reactive, toRefs } from \"vue\";\nimport { useStore } from \"vuex\";\nimport { Toast } from \"vant\";\nimport api from \"@/api/index\";\nimport { useRouter } from \"vue-router\";\n\nexport default {\n  components: { Nav },\n  name: \"UpdatePerson\",\n  setup() {\n    const store = useStore(),\n      router = useRouter();\n\n    let { name } = store.state.info;\n    let state = reactive({\n      name,\n      pic: [],\n      loading: false,\n    });\n\n    const submit = async () => {\n      if (state.loading) return;\n      state.loading = true;\n\n      let { name, pic } = state,\n        reg = /^[\\w\\u4e00-\\u9fa5]+$/;\n      // 格式校验\n      if (!reg.test(name)) {\n        Toast(\"小主，用户名输入错误~\");\n        return;\n      }\n      if (pic.length === 0) {\n        Toast(\"小主，必须上传一张图片~\");\n        return;\n      }\n      // 提交数据给服务器\n      let { code, data } = await api.userUpdate(name, pic[0].file);\n      if (+code !== 0) {\n        Toast(\"小主，信息修改失败，请稍后再试~\");\n        return;\n      }\n      Toast(\"小主太棒啦，信息修改成功~\");\n      store.commit(\"changeInfo\", data);\n      router.replace(\"/person\");\n\n      state.loading = false;\n    };\n\n    return {\n      ...toRefs(state),\n      submit,\n    };\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.form-box {\n  margin-top: 30px;\n}\n</style>"],"sourceRoot":""}]}