{"remainingRequest":"C:\\Users\\86157\\Desktop\\vue3\\zhihu\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\86157\\Desktop\\vue3\\zhihu\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\86157\\Desktop\\vue3\\zhihu\\src\\router\\index.js","dependencies":[{"path":"C:\\Users\\86157\\Desktop\\vue3\\zhihu\\src\\router\\index.js","mtime":1713191902473},{"path":"C:\\Users\\86157\\Desktop\\vue3\\zhihu\\babel.config.js","mtime":1713190411782},{"path":"C:\\Users\\86157\\Desktop\\vue3\\zhihu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\86157\\Desktop\\vue3\\zhihu\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\86157\\Desktop\\vue3\\zhihu\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzLzg2MTU3L0Rlc2t0b3AvdnVlMy96aGlodS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgeyBjcmVhdGVSb3V0ZXIsIGNyZWF0ZVdlYkhhc2hIaXN0b3J5IH0gZnJvbSAidnVlLXJvdXRlciI7CmltcG9ydCByb3V0ZXMgZnJvbSAiLi9yb3V0ZXMiOwppbXBvcnQgc3RvcmUgZnJvbSAiQC9zdG9yZS9pbmRleCI7CmltcG9ydCBhcGkgZnJvbSAiQC9hcGkvaW5kZXgiOwppbXBvcnQgeyBUb2FzdCB9IGZyb20gInZhbnQiOwp2YXIgcm91dGVyID0gY3JlYXRlUm91dGVyKHsKICBoaXN0b3J5OiBjcmVhdGVXZWJIYXNoSGlzdG9yeSgpLAogIHJvdXRlczogcm91dGVzCn0pOwpyb3V0ZXIuYmVmb3JlRWFjaCggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSh0bywgZnJvbSwgbmV4dCkgewogICAgdmFyIGFyciwgaXNMb2dpbiwgX3lpZWxkJGFwaSRjaGVja0xvZ2luLCBjb2RlLCBkYXRhOwoKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgYXJyID0gWyIvcGVyc29uIiwgIi91cGRhdGVwZXJzb24iLCAiL3N0b3JlIl07CgogICAgICAgICAgICBpZiAoIWFyci5pbmNsdWRlcyh0by5wYXRoKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8g5qCh6aqM5piv5ZCm55m75b2VCiAgICAgICAgICAgIGlzTG9naW4gPSBzdG9yZS5zdGF0ZS5pc0xvZ2luOwoKICAgICAgICAgICAgaWYgKCFpc0xvZ2luKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICBpZiAoIShpc0xvZ2luID09PSBmYWxzZSkpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIFRvYXN0KCLlsI/kuLvvvIzor7fmgqjlhYjnmbvlvZXlk6Z+Iik7CiAgICAgICAgICAgIG5leHQoIi9sb2dpbiIpOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICBpZiAoIShpc0xvZ2luID09PSBudWxsKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDExOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ7CiAgICAgICAgICAgIHJldHVybiBhcGkuY2hlY2tMb2dpbigpOwoKICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgIF95aWVsZCRhcGkkY2hlY2tMb2dpbiA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIGNvZGUgPSBfeWllbGQkYXBpJGNoZWNrTG9naW4uY29kZTsKICAgICAgICAgICAgZGF0YSA9IF95aWVsZCRhcGkkY2hlY2tMb2dpbi5kYXRhOwoKICAgICAgICAgICAgaWYgKCEoK2NvZGUgIT09IDApKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIxOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBUb2FzdCgi5bCP5Li777yM6K+35oKo5YWI55m75b2V5ZOmfiIpOwogICAgICAgICAgICBuZXh0KCIvbG9naW4iKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgc3RvcmUuY29tbWl0KCJjaGFuZ2VJc0xvZ2luIiwgdHJ1ZSk7CiAgICAgICAgICAgIHN0b3JlLmNvbW1pdCgiY2hhbmdlSW5mbyIsIGRhdGEpOwogICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyODsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDI2OwogICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDExKTsKCiAgICAgICAgICBjYXNlIDI4OgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICBjYXNlIDI5OgogICAgICAgICAgICBuZXh0KCk7CgogICAgICAgICAgY2FzZSAzMDoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzExLCAyNl1dKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiAoX3gsIF94MiwgX3gzKSB7CiAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKSk7CmV4cG9ydCBkZWZhdWx0IHJvdXRlcjs="},{"version":3,"sources":["C:/Users/86157/Desktop/vue3/zhihu/src/router/index.js"],"names":["createRouter","createWebHashHistory","routes","store","api","Toast","router","history","beforeEach","to","from","next","arr","includes","path","isLogin","state","checkLogin","code","data","commit"],"mappings":";;;;AAAA,SAASA,YAAT,EAAuBC,oBAAvB,QAAmD,YAAnD;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,KAAP,MAAkB,eAAlB;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,SAASC,KAAT,QAAsB,MAAtB;AAEA,IAAMC,MAAM,GAAGN,YAAY,CAAC;AAC1BO,EAAAA,OAAO,EAAEN,oBAAoB,EADH;AAE1BC,EAAAA,MAAM,EAANA;AAF0B,CAAD,CAA3B;AAIAI,MAAM,CAACE,UAAP;AAAA,qEAAkB,iBAAOC,EAAP,EAAWC,IAAX,EAAiBC,IAAjB;AAAA;;AAAA;AAAA;AAAA;AAAA;AACZC,YAAAA,GADY,GACN,CAAC,SAAD,EAAY,eAAZ,EAA6B,QAA7B,CADM;;AAAA,iBAEZA,GAAG,CAACC,QAAJ,CAAaJ,EAAE,CAACK,IAAhB,CAFY;AAAA;AAAA;AAAA;;AAGd;AACIC,YAAAA,OAJU,GAIAZ,KAAK,CAACa,KAAN,CAAYD,OAJZ;;AAAA,iBAKVA,OALU;AAAA;AAAA;AAAA;;AAMZJ,YAAAA,IAAI;AANQ;;AAAA;AAAA,kBASVI,OAAO,KAAK,KATF;AAAA;AAAA;AAAA;;AAUZV,YAAAA,KAAK,CAAC,YAAD,CAAL;AACAM,YAAAA,IAAI,CAAC,QAAD,CAAJ;AAXY;;AAAA;AAAA,kBAcVI,OAAO,KAAK,IAdF;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,mBAgBiBX,GAAG,CAACa,UAAJ,EAhBjB;;AAAA;AAAA;AAgBJC,YAAAA,IAhBI,yBAgBJA,IAhBI;AAgBEC,YAAAA,IAhBF,yBAgBEA,IAhBF;;AAAA,kBAiBN,CAACD,IAAD,KAAU,CAjBJ;AAAA;AAAA;AAAA;;AAkBRb,YAAAA,KAAK,CAAC,YAAD,CAAL;AACAM,YAAAA,IAAI,CAAC,QAAD,CAAJ;AAnBQ;;AAAA;AAsBVR,YAAAA,KAAK,CAACiB,MAAN,CAAa,eAAb,EAA8B,IAA9B;AACAjB,YAAAA,KAAK,CAACiB,MAAN,CAAa,YAAb,EAA2BD,IAA3B;AACAR,YAAAA,IAAI;AAxBM;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AA+BhBA,YAAAA,IAAI;;AA/BY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAlB;;AAAA;AAAA;AAAA;AAAA;AAiCA,eAAeL,MAAf","sourcesContent":["import { createRouter, createWebHashHistory } from \"vue-router\";\nimport routes from \"./routes\";\nimport store from \"@/store/index\";\nimport api from \"@/api/index\";\nimport { Toast } from \"vant\";\n\nconst router = createRouter({\n  history: createWebHashHistory(),\n  routes,\n});\nrouter.beforeEach(async (to, from, next) => {\n  let arr = [\"/person\", \"/updateperson\", \"/store\"];\n  if (arr.includes(to.path)) {\n    // 校验是否登录\n    let isLogin = store.state.isLogin;\n    if (isLogin) {\n      next();\n      return;\n    }\n    if (isLogin === false) {\n      Toast(\"小主，请您先登录哦~\");\n      next(\"/login\");\n      return;\n    }\n    if (isLogin === null) {\n      try {\n        let { code, data } = await api.checkLogin();\n        if (+code !== 0) {\n          Toast(\"小主，请您先登录哦~\");\n          next(\"/login\");\n          return;\n        }\n        store.commit(\"changeIsLogin\", true);\n        store.commit(\"changeInfo\", data);\n        next();\n      } catch (err) {\n        // Handle the error if needed\n      }\n      return;\n    }\n  }\n  next();\n});\nexport default router;\n"]}]}